\section{Extended Abstract}
\label{chap:extAbs}

We consider two related train scheduling problems. On the one hand every year a timetable of preordered freight trains needs to be scheduled, such that all orders are satisfied, while minimizing travel times of each train. This problem will be referred to as the ``Netzfahrplan''-problem. On the other hand we need to satisfy ad-hoc orders which are coming in throughout the year. This constitutes an online optimization problem, where each request again needs to be satisfied, such that its travel time is minimized. In order to provide a good customer service we need to be able to create a scheduled train for each incoming request in less than 3 minutes. This will allow the algorithm to be part of a new digital product called the ``Click \& Ride''-App, therefore we will refer to this problem as the C\&R-problem.

Due to the incoming requests throughout the year it is not sufficient to only minimize the travel times of the trains. We also need to schedule each train in a capacity preserving way such that the likelihood of being able to satisfy future requests remains high. In order to optimize the available capacity we use slots, so-called ``Systemtrassen'', as a measure of capacity in the railroad network (see \cite{FP:2014}). Systemtrassen are preconstructed train schedules for certain parts of the infrastructure. Incoming requests are then assembled partially from Systemtrassen and partially from parts which are calculated ``on-the-fly''.
In this way we transform the process of train scheduling from a microscopic ``make-to-order'' to a mesoscopic ``assemble-to-order'' system.

In our numerical examples we show that we are able to increase the available capacity, i.e., the number of possible trains being scheduled, while reducing the average travel time. Due to the automation of the entire process we are additionally able to present an app which is able to provide individual train schedules within three minutes. We also present a use case for this app as a customer friendly tool for sales of train schedules in the ``last minute'', i.e.,\ 48 hours before departure of the train.

Different approaches for rail freight timetabling exist in literature. Planning of slots was first introduced for cyclic timetables using a PESP by \cite{N:1998} and extended by \cite{O:2009}. \cite{G:2012} showed that the PESP can also be encoded as a SAT problem which leads to significantly lower computation times. For non cyclic timetables, (\cite{G:2013}) proved that a mixed integer formulation works for practical problem sizes.
The train path assignment problem as the second step after planning of slots was introduced by \cite{NO:2014} and extended for optimization with different traffic days (\cite{N:2015}). However, we took serious effort transforming acadamic models into an application in real world optimization.

As pointed out earlier, the innovation of our approach is threefold: First, we are able to generate more capacity of infrastructure without actually building it but by making better use of it. Second, we are able to reduce travel time for most of the scheduled trains by taking the whole problem into account and using global optimization instead of manual, local optimization. Third, we reduce response times by implementing the first fully automated process in short-term capacity planing from ordering to the actual departure of the train. All resulting in a better customer value.

In our numerical experiments we focus on data from the 13th until 15th of November 2013 for the ``Netzfahrplan''-problem and on data from the 13th until 16th of November 2013 for the C\&R-problem. In both cases we use data for the infrastructure of the German railroads as operated by DB Netz from those days. We model the intrastucture in a suitable representation for our purpose using graph structures. As we concentrate on freight trains only, we consider all passenger trains as fixed blockages of the infrastructure. Therefore we reconstructed all headway times from 13th to 16th of September 2013 from the timetables of those days. Furthermore, we respect all directives e.g.\ buffer-times, which were effective at that time in our optimization model.

In our numerical experiments we focus on data from the 13th until 15th of November 2013 for the ``Netzfahrplan''-problem and on data from the 13th until 16th of November 2013 for the C\&R-problem. In both cases we use data for the infrastructure of the German railroads as operated by DB Netz from those days. The digital infrastructure model we use as reference is known as ``Spurplan''. We transform this model into a more suitable representation for our purpose using graph structures. As we concentrate on freight trains only, we consider all passenger trains as fixed blockages of the infrastructure. Therefore we used all headway times from the timetables of those days. Furthermore, we respect all directives (e.g. buffer times), which were effective at that time in our optimization model.

As explained earlier the C\&R-App gives the cargo customer a valid timetable after no more than three minutes. As for now the app is working as designed. However, the app is not used by customer yet since it is still in a evaluation phase, where bugs can be found and fixed. \\
Nevertheless, this situation changes in 2019 as the release of the C\&R-App is planned. This is going to have an huge impact on the timetabling procedure as customers can then expect their timetables within three minutes. Today a manual short-term creation of a timetable may take up to 72 hours. Therefore many customers order their timetables a long time ahead, even though they might not know the exact details of the required train yet, or even if they will actually need the timetable at all at the requested time.
For example, when reloading goods from a ship to a train, changes in the timetable of the ship will affect the actual departure time of the train, which is therefore hard to know far in advance and the expectation might not fit the actual time anymore. In order to provide a good service to the customer, the train will be disposed through the network at its actual departure anyway, but this practice creates instability during the operation of the train network.\\
As a conclusion, the new app will allow customers to order their timetables much later when they have better information about their actual demands and gives them a chance to actually stick to their timetable. Furthermore, due to the better information of the actual requested train, better data for the construction of the timetable is provided, yielding a more appropriate use of infrastructure and thus better timetables for both the infrastructure operating company and the customer. \\
Consequently, our solution is not only academic it also solves real world problems and we assume that about 80\% of the customer requests can be answered automatically. \\
For the future, we plan to provide a choice set of three different timetables within the app, for the customer to decide which option fits best. \\
Furthermore, after going live with the C\&R-App, we also want to include the automatic timetable scheduling of the "Netzfahrplan" into the regular process of the timetable scheduling for fright trains. \\
The described next steps will be implemented incrementally as we want to learn how the customers react to the new process and we want to incorporate their feedback into the ongoing development. With this approach we get a better quality of the timetable scheduling step by step together with our customers. \\
This new way of fright timetable scheduling prepares DB Netze for the future with an increased efficiency since we have less effort for staff and customer. We are not only more efficient in the planning of timetables, but also have a higher capacity utilization of the infrastructure as well as are able to offer our cargo customer a better timetable since they reach their destination earlier.   \\

